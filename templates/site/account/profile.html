{% extends 'site/layouts/base.html' %}
{% load static %}

{% block title %}Edit Profile - BioLife{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-8">Edit Profile</h1>
    
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Sidebar -->
        <aside class="lg:col-span-1">
            <div class="bg-white rounded-lg shadow-md p-6">
                <nav class="space-y-2">
                    <a href="{% url 'website:account_dashboard' %}" 
                       class="block px-4 py-2 text-gray-700 hover:bg-biolife-green-light rounded-lg transition-colors">
                        Dashboard
                    </a>
                    <a href="{% url 'website:account_profile' %}" 
                       class="block px-4 py-2 bg-biolife-green text-white rounded-lg font-semibold">
                        Profile
                    </a>
                    <a href="{% url 'website:account_orders' %}" 
                       class="block px-4 py-2 text-gray-700 hover:bg-biolife-green-light rounded-lg transition-colors">
                        Orders
                    </a>
                    <a href="{% url 'website:account_addresses' %}" 
                       class="block px-4 py-2 text-gray-700 hover:bg-biolife-green-light rounded-lg transition-colors">
                        Addresses
                    </a>
                </nav>
            </div>
        </aside>
        
        <!-- Main Content -->
        <div class="lg:col-span-3">
            <div class="bg-white rounded-lg shadow-md p-6">
                <form method="post" enctype="multipart/form-data" class="space-y-6">
                    {% csrf_token %}
                    
                    <div class="text-center mb-6">
                        {% if user.image %}
                            <img src="{{ user.image.url }}" alt="{{ user.name }}" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                        {% else %}
                            <div class="w-32 h-32 bg-biolife-green-light rounded-full mx-auto mb-4 flex items-center justify-center">
                                <i data-feather="user" class="w-16 h-16 text-biolife-green"></i>
                            </div>
                        {% endif %}
                        <label for="image" class="cursor-pointer">
                            <span class="text-biolife-green hover:text-biolife-green-dark font-semibold">Change Photo</span>
                            <input type="file" id="image" name="image" accept="image/*" class="hidden">
                        </label>
                    </div>
                    
                    <div>
                        <label for="name" class="block text-gray-700 font-semibold mb-2">Full Name</label>
                        <input type="text" 
                               id="name" 
                               name="name" 
                               value="{{ user.name }}"
                               required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-biolife-green">
                    </div>
                    
                    <div>
                        <label for="email" class="block text-gray-700 font-semibold mb-2">Email Address</label>
                        <input type="email" 
                               id="email" 
                               value="{{ user.email }}"
                               disabled
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100">
                        <p class="text-sm text-gray-500 mt-1">Email cannot be changed</p>
                    </div>
                    
                    <div>
                        <label for="phone" class="block text-gray-700 font-semibold mb-2">Phone Number</label>
                        <input type="tel" 
                               id="phone" 
                               name="phone" 
                               value="{{ user.phone|default:'' }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-biolife-green"
                               placeholder="+977 98XXXXXXXX">
                    </div>
                    
                    <div>
                        <label for="date_of_birth" class="block text-gray-700 font-semibold mb-2">Date of Birth</label>
                        <input type="date" 
                               id="date_of_birth" 
                               name="date_of_birth" 
                               value="{{ user.date_of_birth|date:'Y-m-d'|default:'' }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-biolife-green">
                    </div>
                    
                    <div>
                        <label for="address" class="block text-gray-700 font-semibold mb-2">Address</label>
                        <textarea id="address" 
                                  name="address" 
                                  rows="3"
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-biolife-green"
                                  placeholder="Your address">{{ user.address|default:'' }}</textarea>
                    </div>
                    
                    <button type="submit" 
                            class="w-full bg-biolife-green text-white py-3 rounded-lg hover:bg-biolife-green-dark transition-colors font-semibold text-lg">
                        Save Changes
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
